<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <title>The Living Word Online</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #custom-dropdown {
      display: none;
      overflow-y: auto;
    }
    #custom-dropdown.active {
      display: block;
    }
    html {
      scroll-behavior: smooth;
    }
  </style>
</head>
<body class="bg-white text-black font-sans">

<input type="hidden" id="book">
<input type="hidden" id="chapter">
<input type="hidden" id="verse">

<!-- Sticky Header Bar -->
<div id="search" class="sticky top-0 bg-white z-10 border-b shadow-sm px-4 py-2">
  <div class="relative flex items-center justify-between max-w-5xl mx-auto">

    <!-- Left: Pills -->
    <div class="flex space-x-2 shrink-0">
      <button onclick="openBookPicker()" class="bg-gray-100 px-3 py-1 rounded-full text-sm font-semibold">
        <span id="pill-book">Book</span>
      </button>
      <button onclick="openChapterPicker()" class="bg-gray-100 px-3 py-1 rounded-full text-sm font-semibold">
        <span id="pill-chapter">Chapter</span>
      </button>
      <button onclick="openVersePicker()" class="bg-gray-100 px-3 py-1 rounded-full text-sm font-semibold">
        <span id="pill-verse">Verse</span>
      </button>
    </div>

    <!-- Center: Bible App Title -->
    <div class="absolute md:left-1/2 md:-translate-x-1/2 right-10 md:right-auto z-10 whitespace-nowrap">
      <button onclick="goHome()" class="text-base sm:text-lg font-bold text-black hover:text-blue-600 transition">
        The Living Word
      </button>
    </div>

    <!-- Right: Icons -->
    <div class="flex items-center space-x-3 text-xl shrink-0" id="search-container">
      <!-- ðŸ” -->
      <button onclick="toggleSearchDropdown()" title="Search">
        <svg class="w-6 h-6 text-black" fill="none" stroke="currentColor" stroke-width="2"
             viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8" />
          <line x1="21" y1="21" x2="16.65" y2="16.65" />
        </svg>
      </button>

      <!-- Hidden Dropdown -->
      <div id="search-dropdown" class="absolute top-12 right-0 w-72 bg-white shadow-lg rounded-lg p-4 hidden z-50">
        <!-- Search Form -->
        <form id="search-form" class="flex gap-2 mb-2">
          <input id="searchQuery" type="text" placeholder="Search keywords or phrases..."
            class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring focus:border-blue-400" />
          <button type="submit" class="bg-black text-white px-4 py-2 rounded text-sm hover:bg-gray-800">Search</button>
        </form>

        <!-- Filters -->
        <div class="flex flex-col gap-1 text-sm">
          <label><input type="radio" name="filter" value="all" checked> All</label>
          <label><input type="radio" name="filter" value="ot"> Old Testament</label>
          <label><input type="radio" name="filter" value="nt"> New Testament</label>
          <label><input type="radio" name="filter" value="book"> Current Book</label>
        </div>
      </div>
    </div>
  </div>
</div>



  <!-- ðŸŒŸ Welcome Section -->
  <section id="welcome-section" class="min-h-screen flex flex-col justify-center items-center text-center bg-gradient-to-b from-white to-blue-100 px-4">
    <h1 class="text-4xl sm:text-5xl font-bold mb-4 text-gray-900">The Living Word Online</h1>
    <p class="text-lg sm:text-xl text-gray-700 mb-6 max-w-xl">
      Search, read, and reflect on verses from the Bible.
    </p>
    <a href="#search" onclick="loadGenesis1()"
   class="inline-block bg-black text-white px-6 py-3 rounded hover:bg-gray-800 transition text-sm">
  Start Reading ðŸ“–
</a>
  </section>

  <!-- ðŸ“– Results -->
  <div id="result-section" class="max-w-prose mx-auto px-4 py-6 hidden">
    <div id="result" class="text-base leading-relaxed whitespace-pre-wrap pb-24"></div>
  </div>

<!-- Chapter Picker Modal -->
<div id="chapter-picker" class="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50 hidden">
  <div class="bg-white rounded-lg p-4 max-w-xs w-full shadow-lg">
    <div class="text-center mb-2 font-semibold text-lg" id="chapter-picker-title">Select Chapter</div>
    <div class="overflow-y-auto max-h-96">
      <div id="chapter-grid" class="grid grid-cols-7 gap-2 text-center text-sm"></div>
    </div>
    <button onclick="closeChapterPicker()" class="mt-4 w-full text-sm text-gray-700 py-1 border rounded hover:bg-gray-100">Cancel</button>
  </div>
</div>





<!-- Verse Picker Modal -->
<div id="verse-picker" class="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50 hidden">
  <div class="bg-white rounded-lg p-4 max-w-xs w-full shadow-lg">
    <div class="text-center mb-2 font-semibold text-lg" id="verse-picker-title">Select Verse</div>

    <!-- Scrollable grid like chapter picker -->
    <div class="overflow-y-auto max-h-96">
      <div id="verse-grid" class="grid grid-cols-7 gap-2 text-center text-sm">
        <!-- Verses will be dynamically added here -->
      </div>
    </div>

    <button onclick="closeVersePicker()" class="mt-4 w-full text-sm text-gray-700 py-1 border rounded hover:bg-gray-100">Cancel</button>
  </div>
</div>




<!-- Book Picker Modal -->
<div id="book-picker" class="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50 hidden">
  <div class="bg-white rounded-lg p-4 max-w-md w-full shadow-lg max-h-[90vh] overflow-y-auto">
    <div class="text-center mb-2 font-semibold text-lg">Select Book</div>

    <div class="mb-4">
      <div class="text-sm font-semibold mb-1">Old Testament</div>
      <div id="old-testament" class="grid grid-cols-6 gap-2 text-center text-sm"></div>
    </div>

    <div>
      <div class="text-sm font-semibold mb-1">New Testament</div>
      <div id="new-testament" class="grid grid-cols-6 gap-2 text-center text-sm"></div>
    </div>

    <button onclick="closeBookPicker()" class="mt-4 w-full text-sm text-gray-700 py-1 border rounded hover:bg-gray-100">Cancel</button>
  </div>
</div>





<div id="topics-wrapper" class="block">
  <section id="topics-section" class="max-w-4xl mx-auto px-4 py-8">
    <h2 class="text-2xl font-bold mb-4"> Bible Topics</h2>
    <div id="topics-display" class="space-y-4">
      <!-- Topics will be injected here -->
    </div>
  </section>
</div>











  <script>
 

    document.addEventListener("DOMContentLoaded", () => {
      // toggleClearButton();
    });

    // Show result section, hide welcome
    function showResultArea() {
      document.getElementById("welcome-section").classList.add("hidden");
      document.getElementById("result-section").classList.remove("hidden");
    }

    // Patch global to make available for script.js
    window.showResultArea = showResultArea;

    
  function toggleSearchDropdown() {
    const dropdown = document.getElementById("search-dropdown");
    dropdown.classList.toggle("hidden");
  }




    function toggleSearchDropdown() {
    const dropdown = document.getElementById("search-dropdown");
    dropdown.classList.toggle("hidden");
  }

  // Close dropdown when clicking outside
  document.addEventListener("click", function (event) {
    const dropdown = document.getElementById("search-dropdown");
    const container = document.getElementById("search-container");

    // If the dropdown is open and click is outside
    if (!container.contains(event.target)) {
      dropdown.classList.add("hidden");
    }
  });




    function loadGenesis1() {
    // Set Book, Chapter, Verse inputs
    document.getElementById("book").value = "Genesis";
    document.getElementById("chapter").value = "1";
    document.getElementById("verse").value = ""; // optional: leave blank to load full chapter

    // Update pill display text
    document.getElementById("pill-book").textContent = "Genesis";
    document.getElementById("pill-chapter").textContent = "1";
    document.getElementById("pill-verse").textContent = "Verse"; // reset

    // Call your fetch/display logic (assuming you have maybeAutoFetch or similar)
    if (typeof maybeAutoFetch === "function") {
      maybeAutoFetch();
    }

    // Show result area
    showResultArea();
  }



  function goHome() {
  // Clear inputs and go back to welcome section
  document.getElementById("welcome-section").classList.remove("hidden");
  document.getElementById("result-section").classList.add("hidden");

  // Optional: clear any previous state
  document.getElementById("book").value = "";
  document.getElementById("chapter").value = "";
  document.getElementById("verse").value = "";

  document.getElementById("pill-book").textContent = "Book";
  document.getElementById("pill-chapter").textContent = "Chapter";
  document.getElementById("pill-verse").textContent = "Verse";

  // Optional: scroll to top
  window.scrollTo({ top: 0, behavior: "smooth" });
}
</script>




  <!-- âœ… Supabase SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.42.3/dist/umd/supabase.js"></script>

<!-- âœ… Your App Logic -->
<script src="script.js"></script>

</body>
</html>
